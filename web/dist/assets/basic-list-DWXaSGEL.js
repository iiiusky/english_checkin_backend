import{_ as re}from"./index-BcFWfTET.js";import{f as _,c as g,o as N,a2 as M,ae as j,u as r,a5 as m,a3 as s,ag as O,F as L,aj as R,S as ue,r as ie,a9 as T,aa as n,k as a,ad as C,B as ce,H as U,G as S}from"./vue-DApy1uhY.js";import{a7 as _e,a8 as de,a9 as pe,u as me,ag as fe,b as ve,D as ge,M as xe,c as we,bb as ye,aA as ke,aB as he,bc as be,G as Se,bd as q,a0 as $e,V as Ce,W as Me,be as He,v as De,w as Ye,ap as Ve,d as Be,bf as Ie}from"./antd-B7v2hwFR.js";import{j as Oe,_ as Te}from"./index-CL6hUm94.js";import"./context-BAOSbWj-.js";async function Ue(x){return Oe("/list/basic-list",x,{customDev:!0})}const qe={key:0,class:"list-container"},ze={__name:"index",props:{dataSource:{type:Array,required:!0},itemHeight:{type:Number,required:!1,default:80}},setup(x){const d=x,f=_(),w=g(()=>`transform: translateY(${f.value}px)`),y=_(),i=g(()=>y.value?y.value.offsetHeight:0),H=g(()=>Math.ceil(i.value/d.itemHeight)+1),v=_(0),D=g(()=>v.value+H.value),t=_(),p=g(()=>{var u,c;if((u=t.value)!=null&&u.length)return d.itemHeight*((c=t.value)==null?void 0:c.length)}),k=g(()=>{var o;const u=Math.max(0,v.value),c=Math.min(D.value,t.value.length);return(o=t.value)==null?void 0:o.slice(u,c)});function h(){if(d.dataSource)t.value=d.dataSource;else{const u=Array.from({length:1e4});u.forEach((c,o)=>{u[o]=o}),t.value=u}}function Y(u){const c=u.target.scrollTop;v.value=Math.floor(c/d.itemHeight),f.value=v.value*d.itemHeight}return N(()=>{h()}),(u,c)=>r(t)?(m(),M("div",qe,[s("div",{ref_key:"scrollerContainerRef",ref:y,class:"scroller-container scrollbar",onScroll:Y},[s("div",{class:"pillar",style:O({height:`${r(p)}px`})},null,4),s("div",{class:"list",style:O(r(w))},[(m(!0),M(L,null,R(r(k),(o,e)=>(m(),M("div",{key:e,class:"item",style:O({height:`${x.itemHeight}px`})},[ue(u.$slots,"renderItem",{item:o},void 0,!0)],4))),128))],4)],544)])):j("",!0)}},Ae=Te(ze,[["__scopeId","data-v-24f2c992"]]),Ne={class:"flex flex-col items-center justify-center"},je={class:"text-zinc-400"},Le={style:{"font-size":"24px"}},Re={class:"ml-5"},Ee={href:"https://www.antdv.com/"},Fe={class:"flex text-gray-400"},Ge={class:"px-10"},Pe={class:"w-45 flex items-center"},Je={class:"a-extra"},Qe=["onClick"],We=["onClick"],nt={__name:"basic-list",setup(x){const d=_([{title:"我的待办",content:"8个任务"},{title:"本周任务平均处理时间",content:"32分钟"},{title:"本周完成任务数",content:"24个任务"}]),f=_("a"),w=_();function y(o){console.log("use value",o)}const i=_([]),H=_({pageSize:5,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,total:0});async function v(){var e;const o=await Ue();i.value=o.data??[],H.value.total=((e=o.data)==null?void 0:e.length)??0,console.log(i.value)}function D(o){q.confirm({title:"删除任务",icon:a(Ie),content:a("div",{},"确定要删除该任务吗?"),cancelText:"取消",okText:"确认",onOk(){i.value.splice(o,1)},class:"test"})}const t=ie({title:"",start:"",owner:"清风不问烟雨",description:"",index:0}),p=_(!1),k=_(!1);function h(o,e){e?(k.value=!0,p.value=!0):(k.value=!1,p.value=!0,t.title=o.title,t.description=o.content,t.start=Be(o.start),t.index=i.value.indexOf(o))}function Y(){let o=2;const e=q.success({title:"操作成功",content:`本窗口将在${o}后自动关闭`}),b=setInterval(()=>{o-=1,e.update({content:`本窗口将在${o}后自动关闭`})},1e3);setTimeout(()=>{clearInterval(b),e.destroy()},o*1e3)}function u(){for(const e in t)if(e!=="index"&&!t[e])return;const o=t.index;if(k.value){const e={title:t.title,content:t.description,start:t.start.format("YYYY-MM-DD HH:mm")};i.value.splice(0,0,e)}else for(const e in t)e==="start"?i.value[o][e]=t.start.format("YYYY-MM-DD HH:mm"):i.value[o][e]=t[e];p.value=!1,c(),Y()}function c(){console.log("cancel"),t.description="",t.owner="清风不问烟雨",t.start="",t.title=""}return N(()=>{v()}),(o,e)=>{const b=pe,z=de,V=_e,B=he,E=ke,F=be,G=ve,P=fe,J=ye,A=we,Q=xe,W=ge,K=me,X=Se,Z=Me,$=Ce,ee=He,te=Ye,ne=De,ae=Ve,oe=$e,le=q,se=re;return m(),T(se,null,{default:n(()=>[a(V,null,{default:n(()=>[a(z,{gutter:16},{default:n(()=>[(m(!0),M(L,null,R(r(d),(l,I)=>(m(),T(b,{key:I,xs:24,sm:8},{default:n(()=>[s("div",Ne,[s("div",je,C(l.title),1),s("div",Le,C(l.content),1)])]),_:2},1024))),128))]),_:1})]),_:1}),a(V,{class:"mt-5"},{title:n(()=>[a(V,{bordered:!1},{default:n(()=>[a(z,{style:{"font-weight":"normal"}},{default:n(()=>[a(b,{span:14},{default:n(()=>e[9]||(e[9]=[s("span",null,"基本列表",-1)])),_:1}),a(b,{span:10,class:"flex"},{default:n(()=>[s("div",null,[a(E,{value:r(f),"onUpdate:value":e[0]||(e[0]=l=>U(f)?f.value=l:null)},{default:n(()=>[a(B,{value:"a"},{default:n(()=>e[10]||(e[10]=[S(" 全部 ")])),_:1}),a(B,{value:"b"},{default:n(()=>e[11]||(e[11]=[S(" 进行中 ")])),_:1}),a(B,{value:"c"},{default:n(()=>e[12]||(e[12]=[S(" 等待中 ")])),_:1})]),_:1},8,["value"])]),s("div",Re,[a(F,{value:r(w),"onUpdate:value":e[1]||(e[1]=l=>U(w)?w.value=l:null),placeholder:"请输入",style:{width:"270px"},onSearch:y},null,8,["value"])])]),_:1})]),_:1})]),_:1})]),default:n(()=>[r(i).length!==0?(m(),T(Ae,{key:0,"data-source":r(i)},{renderItem:n(({item:l})=>[a(K,null,{actions:n(()=>[s("div",Fe,[e[14]||(e[14]=s("div",{class:"flex flex-col items-center"},[s("div",null,"Owner"),s("div",null,"清风不问烟雨")],-1)),s("div",Ge,[e[13]||(e[13]=s("div",null,"开始时间",-1)),s("div",null,C(l.start),1)]),s("div",Pe,[a(J,{percent:l.percent,status:l.status},null,8,["percent","status"])])])]),extra:n(()=>[s("div",Je,[s("a",{key:"list-loadmore-edit",class:"m-4",onClick:I=>h(l)}," 编辑 ",8,Qe),a(W,null,{overlay:n(()=>[a(Q,null,{default:n(()=>[a(A,null,{default:n(()=>[s("a",{onClick:h},"编辑")]),_:1}),a(A,null,{default:n(()=>[s("a",{onClick:I=>D(l.index)},"删除",8,We)]),_:2},1024)]),_:2},1024)]),default:n(()=>[s("a",{class:"ant-dropdown-link",onClick:e[2]||(e[2]=ce(()=>{},["prevent"]))}," 更多 ")]),_:2},1024)])]),default:n(()=>[a(P,{description:l.content},{title:n(()=>[s("a",Ee,C(l.title),1)]),avatar:n(()=>[a(G,{src:l.link},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])):j("",!0)]),_:1}),a(X,{type:"dashed",onClick:e[3]||(e[3]=l=>h(null,!0))},{default:n(()=>e[15]||(e[15]=[S(" + 添加 ")])),_:1}),a(le,{open:r(p),"onUpdate:open":e[8]||(e[8]=l=>U(p)?p.value=l:null),title:"任务编辑",onOk:u,onCancel:c},{default:n(()=>[a(oe,{model:r(t),name:"basic","label-col":{span:24},"wrapper-col":{span:24},autocomplete:"off"},{default:n(()=>[a($,{label:"任务名称",name:"title",rules:[{required:!0,message:"请输入任务名称"}]},{default:n(()=>[a(Z,{value:r(t).title,"onUpdate:value":e[4]||(e[4]=l=>r(t).title=l)},null,8,["value"])]),_:1}),a($,{label:"开始时间",name:"start",rules:[{required:!0,message:"请选择开始时间"}]},{default:n(()=>[a(ee,{value:r(t).start,"onUpdate:value":e[5]||(e[5]=l=>r(t).start=l),class:"w-1/1","show-time":""},null,8,["value"])]),_:1}),a($,{label:"任务负责人",name:"owner",rules:[{required:!0,message:"请输入任务负责人"}]},{default:n(()=>[a(ne,{value:r(t).owner,"onUpdate:value":e[6]||(e[6]=l=>r(t).owner=l),placeholder:"please select your zone"},{default:n(()=>[a(te,{value:"owner"},{default:n(()=>e[16]||(e[16]=[S(" 清风不问烟雨 ")])),_:1})]),_:1},8,["value"])]),_:1}),a($,{label:"产品描述",name:"description",rules:[{required:!0,message:"请输入产品描述"}]},{default:n(()=>[a(ae,{value:r(t).description,"onUpdate:value":e[7]||(e[7]=l=>r(t).description=l),placeholder:"Basic usage",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])]),_:1})}}};export{nt as default};
